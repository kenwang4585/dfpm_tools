
<!-- Ken wang, Jan, 2020 -->

{% extends 'base.html' %}


{% block content %}
        <br>

    <form method="post" enctype="multipart/form-data">
        {{ form.csrf_token }}
        <h2 align="center">BU specifi config rule</h2>
        <table style="border-collapse:collapse" bgcolor="#f5f5f5" border="1" cellspacing="0px" align="center" width="90%">
            <tr>
                <td width="10%">BU</td>
                <td width="10%">Owner</td>
                <td width="20%">New config file</td>
                <td width="20%">Confirm to replace</td>
                <td width="20%">Upload and replace rule file</td>
                <td width="20%">Download current config file</td>
            </tr>
            <tr>
                <td>PABU</td>
                <td>Calina Gong</td>
                <td>{{ form.file_pabu }}</td>
                <td>{{ form.confirm_pabu }}&nbsp;&nbsp;{{ form.confirm_pabu.label }}</td>
                <td>{{ form.submit_upload_pabu }}</td>
                <td>
                    <a href="{{ url_for('download_file_tracker',filename='PABU slot config rules.xlsx') }}">download</a>
                </td>
            </tr>
            <tr>
                <td>SRGBU</td>
                <td>Rachel Zhang</td>
                <td>{{ form.file_srgbu }}</td>
                <td>{{ form.confirm_srgbu }}&nbsp;&nbsp;{{ form.confirm_srgbu.label }}</td>
                <td>{{ form.submit_upload_srgbu }}</td>
                <td>
                    <a href="{{ url_for('download_file_tracker',filename='SRGBU config rules.xlsx') }}">download</a>
                </td>
            </tr>
        </table>
        <br><br><br>

        <hr />
        <h2 align="center">General inclusion and exclusion rule - PID based</h2>
        <h5 style="color: #005cbf" align="center">
            Definition: For related BU or PF, if it includes PID_A, it must also include PID_B, and must NOT include PID_C. <br>
            (if multiple input (e.g. AC;DC), for PID_A,it's considered as AC 'or' DC (same for PID_B); in case of PID_C,it's considered as AC 'and' DC)
        </h5>

        <table style="border-collapse:collapse"border="0" cellspacing="0px" align="center" width="50%">
            <tr align="center">
                <td>
                    {{ form.org_bupf_rule.label }} <br> {{ form.org_bupf_rule }}
                </td>
                <td>
                    {{ form.bu_bupf_rule.label }} <br> {{ form.bu_bupf_rule }}
                </td>
                <td>
                    {{ form.pf_pid_rule.label }} <br> {{ form.pf_pid_rule }}
                </td>
                <td>
                    {{ form.pid_a_pid_rule.label }} <br> {{ form.pid_a_pid_rule }} <br>
                    {{ form.pid_a_exception_pid_rule.label }} <br> {{ form.pid_a_exception_pid_rule }}
                </td>>
                <td>
                    {{ form.pid_b_pid_rule.label }} <br> {{ form.pid_b_pid_rule }} <br>
                    {{ form.pid_b_exception_pid_rule.label }} <br> {{ form.pid_b_exception_pid_rule }}
                </td>
                <td>
                    {{ form.pid_c_pid_rule.label }} <br> {{ form.pid_c_pid_rule }} <br>
                    {{ form.pid_c_exception_pid_rule.label }} <br> {{ form.pid_c_exception_pid_rule }}
                </td>
                <td>{{ form.remark_pid_rule.label }} <br> {{ form.remark_pid_rule }}</td>
                <td valign="middle"><br>{{ form.submit_pid_rule }}</td>
            </tr>
        </table>

        <table  style="border-collapse:collapse" border="0" cellspacing="0px" align="center" width="90%">
            <tr> <!-- For viewing the details -->
                <td width="95%">
                    <br>
                    {% if df_pid_rule_data|length>0 %}
                        <table style="border-collapse:collapse; word-break:break-all; word-wrap: break-word " border="1" cellspacing="0px" align="center">
                            <tr>
                                {% for col in df_pid_rule_header %}
                                    <td><span style="font-size: small">&nbsp;&nbsp;&nbsp;{{col}}</span></td>
                                {% endfor %}
                                <td>Remove</td>
                            </tr>

                            {% for row in df_pid_rule_data %}
                                <tr>
                                    {% for col in row %}
                                        <td><span style="font-size: small">&nbsp;&nbsp;&nbsp;{{col}}</span></td>
                                    {% endfor %}
                                    <td align="center">
                                        <a href="{{ url_for('delete_general_config_rule_pid_record',login_user=login_user,added_by=row[11],record_id=row[0]) }}">remove</a>
                                    </td>
                                </tr>
                            {% endfor %}
                        </table>
                    {% endif %}
                </td>
            </tr>
        </table>


        <br><br><br>
        <hr />
        <h2 align="center">General inclusion and exclusion rule - BU/PF based</h2>
        <h5   style="color: #005cbf" align="center">
            Definition: For related BU or PF, it must include PID_A, and must NOT include PID_B. <br>
            (if multiple input(e.g. AC;DC), for PID_A,it's considered as AC 'or' DC; in case of PID_B,it's considered as AC 'and' DC)
        </h5>
        <table style="border-collapse:collapse"border="0" cellspacing="0px" align="center" width="50%">
            <tr align="center">
                <td>
                    {{ form.org_bupf_rule.label }} <br> {{ form.org_bupf_rule }}
                </td>
                <td>
                    {{ form.bu_bupf_rule.label }} <br> {{ form.bu_bupf_rule }}
                </td>
                <td>
                    {{ form.pf_bupf_rule.label }} <br> {{ form.pf_bupf_rule }} <br>
                    {{ form.exception_main_pid_bupf_rule.label }} <br> {{ form.exception_main_pid_bupf_rule }}
                </td>
                <td>
                    {{ form.pid_a_bupf_rule.label }} <br> {{ form.pid_a_bupf_rule }}
                </td>>
                <td>
                    {{ form.pid_b_bupf_rule.label }} <br> {{ form.pid_b_bupf_rule }}
                </td>
                <td>{{ form.remark_bupf_rule.label }} <br> {{ form.remark_bupf_rule }}</td>
                <td valign="middle"><br>{{ form.submit_bupf_rule }}</td>
            </tr>
        </table>

        <table  style="border-collapse:collapse" border="0" cellspacing="0px" align="center" width="90%">
            <tr> <!-- For viewing the details -->
                <td width="95%">
                    <br>
                    {% if df_pf_rule_data|length>0 %}
                        <table style="border-collapse:collapse; word-break:break-all; word-wrap: break-word " border="1" cellspacing="0px" align="center">
                            <tr>
                                {% for col in df_pf_rule_header %}
                                    <td><span style="font-size: small">&nbsp;&nbsp;&nbsp;{{col}}</span></td>
                                {% endfor %}
                                <td>Remove</td>
                            </tr>

                            {% for row in df_pf_rule_data %}
                                <tr>
                                    {% for col in row %}
                                        <td><span style="font-size: small">&nbsp;&nbsp;&nbsp;{{col}}</span></td>
                                    {% endfor %}
                                    <td align="center">
                                        <a href="{{ url_for('delete_general_config_rule_pf_record',login_user=login_user,added_by=row[8],record_id=row[0]) }}">remove</a>
                                    </td>
                                </tr>
                            {% endfor %}
                        </table>
                    {% endif %}
                </td>
            </tr>
        </table>

</form>
{% endblock %}


{% block empty_space %}
    <br><br><br><br><br><br><br><br><br><br><br><br>
{% endblock %}